{% extends 'base.html' %}

{% block title %}
<title>URL Shortener</title>
{% endblock title %}

{% block content %}

{% if new and source %}
    <h1>Shortened!</h1>
    <div class="success-container">
        <span>Success!</span>
    </div>
    <div class="big-url-container">
        <h3>Long URL:</h3>
        <div class="url-container">
            <a href="{{ source }}" target="_blank" class="overflow-link">{{ source }}</a>
        </div>
        <h3>Short URL:</h3>
        <div class="url-container">
            <a href="{{ new }}" target="_blank" class="overflow-link">/shorten/{{ new }}</a>
        </div>

        <div class="copy-container" title="Click to copy link" onclick="copyToClipboard('{{ new }}')">
            <svg xmlns="http://www.w3.org/2000/svg" height="1.5em" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --><style>svg{fill:#ffffff}</style><path d="M272 0H396.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H272c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128H192v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"/></svg>
        </div>
    </div>
{% else %}

    <h1>Oops</h1>
    <p>That didn't work.</p>

{% endif %}

<a href="/shorten/">Go again</a>


<script>
    // Function to copy text to clipboard
function copyToClipboard(text) {
  const textarea = document.createElement('textarea');
  textarea.value = text;
  document.body.appendChild(textarea);
  textarea.select();
  document.execCommand('copy');
  document.body.removeChild(textarea);
}

</script>
{% endblock content %}